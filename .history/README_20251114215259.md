# Nirvahatech Landing Page

A modern, full-stack landing page for Nirvahatech's DevOps and cloud infrastructure services. Built with Next.js 15, FastAPI, and deployed to AWS using Terraform with SOC2 compliance and Well-Architected best practices.

## üèóÔ∏è Architecture

- **Frontend**: Next.js 15 (React 19) with TypeScript and TailwindCSS
- **Backend**: FastAPI (Python) with async SQLAlchemy
- **Database**: PostgreSQL 16
- **Infrastructure**: AWS (ECS Fargate, RDS, Amplify, ALB, WAF)
- **IaC**: Terraform modules
- **CI/CD**: GitHub Actions

## üìÅ Project Structure

```
.
‚îú‚îÄ‚îÄ frontend/                 # Next.js 15 application
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/             # App Router pages
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/      # React components
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ backend/                  # FastAPI application
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/             # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/          # SQLAlchemy models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/         # Pydantic schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core/            # Configuration
‚îÇ   ‚îú‚îÄ‚îÄ alembic/             # Database migrations
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ deployment/
‚îÇ   ‚îî‚îÄ‚îÄ terraform/           # Terraform infrastructure
‚îÇ       ‚îú‚îÄ‚îÄ modules/         # Reusable modules
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ networking/  # VPC, subnets, NAT
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ security/    # Security groups
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ rds/         # PostgreSQL database
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ecs/         # ECS Fargate cluster
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ amplify/     # Frontend hosting
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ monitoring/  # CloudWatch alarms
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ waf/         # Web Application Firewall
‚îÇ       ‚îú‚îÄ‚îÄ main.tf
‚îÇ       ‚îú‚îÄ‚îÄ variables.tf
‚îÇ       ‚îî‚îÄ‚îÄ outputs.tf
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/           # CI/CD pipelines
‚îÇ       ‚îú‚îÄ‚îÄ ci.yml           # Linting and tests
‚îÇ       ‚îú‚îÄ‚îÄ cd-production.yml # Production deployment
‚îÇ       ‚îî‚îÄ‚îÄ shared/          # Reusable workflows
‚îú‚îÄ‚îÄ docker-compose.yml       # Local development
‚îî‚îÄ‚îÄ README.md
```

## üöÄ Local Development

### Prerequisites

- Docker and Docker Compose
- Node.js 20+
- Python 3.11+
- PostgreSQL (or use Docker)

### Quick Start with Docker Compose

1. **Clone the repository**
   ```bash
   git clone https://github.com/YOUR_ORG/nirvahatech.git
   cd nirvahatech
   ```

2. **Start all services**
   ```bash
   docker-compose up -d
   ```

3. **Access the application**
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:8000
   - API Docs: http://localhost:8000/docs

### Frontend Development

```bash
cd frontend
npm install
npm run dev
```

The frontend will be available at http://localhost:3000.

### Backend Development

```bash
cd backend
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

The backend will be available at http://localhost:8000.

### Database Migrations

```bash
cd backend

# Create a new migration
alembic revision --autogenerate -m "Description of changes"

# Apply migrations
alembic upgrade head

# Rollback
alembic downgrade -1
```

## üåê AWS Deployment

### Prerequisites

1. AWS Account with appropriate permissions
2. Terraform installed (>= 1.5.0)
3. AWS CLI configured
4. GitHub repository with Actions enabled
5. ACM certificate for HTTPS

### Setup AWS Infrastructure

1. **Create S3 bucket for Terraform state**
   ```bash
   aws s3api create-bucket \
     --bucket nirvahatech-terraform-state \
     --region us-east-1

   aws s3api put-bucket-versioning \
     --bucket nirvahatech-terraform-state \
     --versioning-configuration Status=Enabled
   ```

2. **Create DynamoDB table for state locking**
   ```bash
   aws dynamodb create-table \
     --table-name nirvahatech-terraform-locks \
     --attribute-definitions AttributeName=LockID,AttributeType=S \
     --key-schema AttributeName=LockID,KeyType=HASH \
     --billing-mode PAY_PER_REQUEST \
     --region us-east-1
   ```

3. **Create ECR repositories**
   ```bash
   aws ecr create-repository \
     --repository-name nirvahatech-backend \
     --region us-east-1
   ```

4. **Configure Terraform variables**
   ```bash
   cd deployment/terraform
   cp terraform.tfvars.example terraform.tfvars
   # Edit terraform.tfvars with your values
   ```

5. **Deploy infrastructure**
   ```bash
   terraform init
   terraform plan
   terraform apply
   ```

### GitHub Actions Secrets

Configure these secrets in your GitHub repository:

- `AWS_ROLE_ARN`: IAM role for GitHub Actions OIDC
- `DB_PASSWORD`: Database password
- `GH_ACCESS_TOKEN`: GitHub personal access token for Amplify
- `ACM_CERTIFICATE_ARN`: ARN of your SSL certificate
- `ALARM_EMAIL`: Email for CloudWatch alarms

### CI/CD Pipeline

The project uses GitHub Actions for CI/CD:

- **CI Pipeline** (`ci.yml`): Runs on every PR
  - Lints backend (Black, Flake8)
  - Lints frontend (ESLint, TypeScript)
  - Builds Docker images
  - Runs tests

- **CD Pipeline** (`cd-production.yml`): Runs on merge to `main`
  - Builds and pushes Docker images to ECR
  - Applies Terraform changes
  - Deploys to ECS Fargate
  - Triggers Amplify build for frontend

## üîí Security & Compliance

The infrastructure follows AWS Well-Architected Framework and SOC2 best practices:

- **Encryption**: Data encrypted at rest (KMS) and in transit (TLS)
- **Network Security**: VPC with public/private subnets, security groups, WAF
- **Access Control**: IAM roles with least privilege, Secrets Manager
- **Monitoring**: CloudWatch logs, metrics, and alarms
- **Audit**: CloudTrail logging, VPC Flow Logs, ALB access logs
- **High Availability**: Multi-AZ RDS, auto-scaling ECS tasks
- **DDoS Protection**: AWS Shield, WAF rate limiting

## üìä Monitoring

### CloudWatch Dashboard

Access the CloudWatch dashboard to monitor:
- ECS CPU and memory utilization
- ALB response times and error rates
- RDS performance metrics
- Custom application metrics

### Alarms

Email notifications are sent for:
- High CPU/memory usage
- Unhealthy targets
- 5XX errors
- RDS connection issues
- Low storage space

## üõ†Ô∏è Tech Stack

### Frontend
- Next.js 15 (App Router)
- React 19
- TypeScript
- TailwindCSS
- React Hook Form
- Zod validation
- Lucide icons

### Backend
- FastAPI
- Python 3.11
- SQLAlchemy 2.0 (async)
- Pydantic v2
- Alembic
- PostgreSQL 16

### Infrastructure
- AWS ECS Fargate
- AWS RDS PostgreSQL
- AWS Amplify
- AWS ALB
- AWS WAF
- AWS Secrets Manager
- AWS CloudWatch
- Terraform

## üìù API Documentation

Once the backend is running, visit:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## üß™ Testing

### Backend Tests
```bash
cd backend
pytest
```

### Frontend Tests
```bash
cd frontend
npm test
```

## ü§ù Contributing

1. Create a feature branch
2. Make your changes
3. Run linting and tests
4. Submit a pull request

## üìÑ License

[Your License Here]

## üìß Support

For support, email support@nirvahatech.com or create an issue in the repository.

